# component system

## ...

不在节点上监听事件而是在 document 上监听，因为鼠标拖拽时有可能离开 carousel，用户的直觉应该是继续拖动而不是戛然而止。
现代浏览器中去监听 documnt 还有一个额外好处，就是即使鼠标离开了浏览器仍然能够监听到。这个特性能够让体验更加好。

花了好久排查另一个问题，就是在滑动几次之后使用 click 进行轮播，发现顺序会乱。devtool 上调试了好久没有看到逻辑上有什么问题。
后来睡觉的时候才想起来：
mouseup 时有异步的 updateSlide，而 click 则没有写 updateSlide，居然也能实现轮播之后的 slide 更新。
这说明 click 一直在依靠 mouseup 事件在起作用啊，解决：

- mouse 事件和 click 事件做下相斥操作，只能生效一个
- 更新操作在每个事件中有且只有一次

美中不足的是，幻灯片更新中将居中的图片移除后再放入。这样逻辑是简单了屏幕上也看不到，但性能上可否再优化下？

autoplay执行的逻辑被分散在了各处，如何利用设计模式让代码更加集中一些呢


## 问题

自动轮播功能仍然有些问题，暂时停掉